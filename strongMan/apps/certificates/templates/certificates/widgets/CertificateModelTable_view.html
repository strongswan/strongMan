<script>
    function removeBtnClicked(form) {
        btn = $("#removebtn-" + form.id)
        if (btn.hasClass('btn-default')) {
            btn.removeClass('btn-default').addClass('btn-danger');
            btn.children('.removebtn-text').text('Remove certificate');
            return false;
        } else {
            return true;
        }

    }

</script>
<table class="table table-striped">
    <thead>
    <tr>
        <th>Name</th>
        <th class="hidden-sm hidden-xs">Subject</th>
        <th>has private key</th>
        <th>Remove</th>
    </tr>
    </thead>
    <tbody>
    {% for p in certificates %}
        <tr>
            <td><a href="{% url "certificates:details" p.id %}"><b>{{ p.subject.cname }}</b></a></td>
            <td class="hidden-xs">{{ p.subject }}</td>
            <td>{% if p.private_key %}Yes{% else %}No{% endif %}</td>
            <td class="editremove-cell">
                <form action="{% url "certificates:details" p.id %}" method="POST" class="inline-form" onsubmit="return removeBtnClicked(this)" id="{{ p.id }}">
                    {% csrf_token %}
                    <span title="Remove certificate">
                        <button type="submit" class="btn btn-default remove-btn"
                                id="removebtn-{{ p.id }}" name="remove_cert">
                            <span class="glyphicon glyphicon-remove"></span> <span class="removebtn-text"></span>
                        </button>
                    </span>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
